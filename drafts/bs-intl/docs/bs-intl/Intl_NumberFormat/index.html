<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Intl_NumberFormat (bs-intl.Intl_NumberFormat)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../">Up</a> â€“ <a href="../">bs-intl</a> &#x00BB; Intl_NumberFormat</nav><h1>Module <code>Intl_NumberFormat</code></h1><p>Provides a shim to the Javascript number internationalization APIs.</p><p>For a pretty good introduction to the <code>Intl.NumberFormat</code> API, see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat</a></p><p>Note that nodejs does <b>not</b> come with the necessary internationalization files by default. If this library isn't working for you in a nodejs context, that's likely the reason. You'll need to roll your own node, or use something like <a href="https://github.com/unicode-org/full-icu-npm">https://github.com/unicode-org/full-icu-npm</a></p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code>;</dt><dd><p>The <a href="https://www.ecma-international.org/ecma-402/1.0/#sec-11"><code>Intl.NumberFormat</code></a> type.</p></dd></dl><dl><dt class="spec type" id="type-localeMatcher"><a href="#type-localeMatcher" class="anchor"></a><code><span class="keyword">type</span> localeMatcher</code><code> = </code><table class="variant"><tr id="type-localeMatcher.Lookup" class="anchored"><td class="def constructor"><a href="#type-localeMatcher.Lookup" class="anchor"></a><code>| </code><code><span class="constructor">Lookup</span></code></td></tr><tr id="type-localeMatcher.BestFit" class="anchored"><td class="def constructor"><a href="#type-localeMatcher.BestFit" class="anchor"></a><code>| </code><code><span class="constructor">BestFit</span></code></td></tr></table>;</dt><dt class="spec type" id="type-currencyDisplay"><a href="#type-currencyDisplay" class="anchor"></a><code><span class="keyword">type</span> currencyDisplay</code><code> = </code><table class="variant"><tr id="type-currencyDisplay.Symbol" class="anchored"><td class="def constructor"><a href="#type-currencyDisplay.Symbol" class="anchor"></a><code>| </code><code><span class="constructor">Symbol</span></code></td></tr><tr id="type-currencyDisplay.Code" class="anchored"><td class="def constructor"><a href="#type-currencyDisplay.Code" class="anchor"></a><code>| </code><code><span class="constructor">Code</span></code></td></tr><tr id="type-currencyDisplay.Name" class="anchored"><td class="def constructor"><a href="#type-currencyDisplay.Name" class="anchor"></a><code>| </code><code><span class="constructor">Name</span></code></td></tr></table>;</dt><dt class="spec type" id="type-currency"><a href="#type-currency" class="anchor"></a><code><span class="keyword">type</span> currency</code><code> = </code><code>{</code><table class="record"><tr id="type-currency.isoCode" class="anchored"><td class="def field"><a href="#type-currency.isoCode" class="anchor"></a><code>isoCode: string,</code></td></tr><tr id="type-currency.display" class="anchored"><td class="def field"><a href="#type-currency.display" class="anchor"></a><code>display: option(<a href="#type-currencyDisplay">currencyDisplay</a>),</code></td></tr></table><code>}</code>;</dt><dt class="spec type" id="type-style"><a href="#type-style" class="anchor"></a><code><span class="keyword">type</span> style</code><code> = </code><table class="variant"><tr id="type-style.Decimal" class="anchored"><td class="def constructor"><a href="#type-style.Decimal" class="anchor"></a><code>| </code><code><span class="constructor">Decimal</span></code></td></tr><tr id="type-style.Percent" class="anchored"><td class="def constructor"><a href="#type-style.Percent" class="anchor"></a><code>| </code><code><span class="constructor">Percent</span></code></td></tr><tr id="type-style.Currency" class="anchored"><td class="def constructor"><a href="#type-style.Currency" class="anchor"></a><code>| </code><code><span class="constructor">Currency</span>(<a href="#type-currency">currency</a>)</code></td></tr></table>;</dt><dt class="spec type" id="type-significantDigits"><a href="#type-significantDigits" class="anchor"></a><code><span class="keyword">type</span> significantDigits</code><code> = </code><code>{</code><table class="record"><tr id="type-significantDigits.minimum" class="anchored"><td class="def field"><a href="#type-significantDigits.minimum" class="anchor"></a><code>minimum: option(int),</code></td></tr><tr id="type-significantDigits.maximum" class="anchored"><td class="def field"><a href="#type-significantDigits.maximum" class="anchor"></a><code>maximum: option(int),</code></td></tr></table><code>}</code>;</dt><dt class="spec type" id="type-fractionDigits"><a href="#type-fractionDigits" class="anchor"></a><code><span class="keyword">type</span> fractionDigits</code><code> = </code><code>{</code><table class="record"><tr id="type-fractionDigits.minimum" class="anchored"><td class="def field"><a href="#type-fractionDigits.minimum" class="anchor"></a><code>minimum: option(int),</code></td></tr><tr id="type-fractionDigits.maximum" class="anchored"><td class="def field"><a href="#type-fractionDigits.maximum" class="anchor"></a><code>maximum: option(int),</code></td></tr></table><code>}</code>;</dt><dt class="spec type" id="type-integerDigits"><a href="#type-integerDigits" class="anchor"></a><code><span class="keyword">type</span> integerDigits</code><code> = </code><code>{</code><table class="record"><tr id="type-integerDigits.minimum" class="anchored"><td class="def field"><a href="#type-integerDigits.minimum" class="anchor"></a><code>minimum: option(int),</code></td></tr></table><code>}</code>;</dt><dt class="spec type" id="type-insignificantDigits"><a href="#type-insignificantDigits" class="anchor"></a><code><span class="keyword">type</span> insignificantDigits</code><code> = </code><code>{</code><table class="record"><tr id="type-insignificantDigits.integer" class="anchored"><td class="def field"><a href="#type-insignificantDigits.integer" class="anchor"></a><code>integer: option(<a href="#type-integerDigits">integerDigits</a>),</code></td></tr><tr id="type-insignificantDigits.fraction" class="anchored"><td class="def field"><a href="#type-insignificantDigits.fraction" class="anchor"></a><code>fraction: option(<a href="#type-fractionDigits">fractionDigits</a>),</code></td></tr></table><code>}</code>;</dt><dt class="spec type" id="type-digits"><a href="#type-digits" class="anchor"></a><code><span class="keyword">type</span> digits</code><code> = </code><table class="variant"><tr id="type-digits.Insignificant" class="anchored"><td class="def constructor"><a href="#type-digits.Insignificant" class="anchor"></a><code>| </code><code><span class="constructor">Insignificant</span>(<a href="#type-insignificantDigits">insignificantDigits</a>)</code></td></tr><tr id="type-digits.Significant" class="anchored"><td class="def constructor"><a href="#type-digits.Significant" class="anchor"></a><code>| </code><code><span class="constructor">Significant</span>(<a href="#type-significantDigits">significantDigits</a>)</code></td></tr></table>;</dt></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">let</span> make: locales:array(string) <span>=&gt;</span> ?&#8288;localeMatcher:<a href="#type-localeMatcher">localeMatcher</a> <span>=&gt;</span> ?&#8288;style:<a href="#type-style">style</a> <span>=&gt;</span> ?&#8288;useGrouping:bool <span>=&gt;</span> ?&#8288;digits:<a href="#type-digits">digits</a> <span>=&gt;</span> unit <span>=&gt;</span> <a href="#type-t">t</a>;</code></dt><dd><p>Create a new <code>Intl.NumberFormat</code> object with the specified options.</p><p>See here for a description of how the arguments are processed and used: <a href="https://www.ecma-international.org/ecma-402/1.0/#sec-11.1.3.1">https://www.ecma-international.org/ecma-402/1.0/#sec-11.1.3.1</a></p><p>We don't try to match the JS arguments exactly, because OCaml's type system offers some additional safety here.</p><p>In particular, since the spec says that if the style option == &quot;currency&quot;, then the currency option must be set with an ISO currency code. We use the type system to enforce that a valid program must have an ISO code if it represents a currency.</p><p>A similar approach works for the minimumSignificantDigits, minimumIntegerDigits, etc. Since only one set of bounds may be used, the type system forces you to pick.</p><p>OCaml:</p><pre><code class="ml">let formatter = Intl.NumberFormat.make
  ~locales:[|&quot;fr&quot;|]
  ~style:Percent
  ~digits:(Insignificant { integer = None; fraction = Some { maximum = Some 3; minimum = Some 3 } })
  () in
let pctStr = Intl.NumberFormat.format formatter 0.984322 in
Js.Console.log pctStr</code></pre><p>Reason:</p><pre><code class="ml">let formatter = Intl.NumberFormat.make(
  ~locales=[|&quot;fr&quot;|],
  ~style=Percent,
  ~digits=Insignificant({integer: None, fraction: Some({maximum: Some(3), minimum: Some(3)})}),
  ());
let pctStr = Intl.NumberFormat.format(formatter, 0.984322);
Js.Console.log(pctStr);</code></pre></dd></dl><dl><dt class="spec value" id="val-format"><a href="#val-format" class="anchor"></a><code><span class="keyword">let</span> format: <a href="#type-t">t</a> <span>=&gt;</span> float <span>=&gt;</span> string;</code></dt><dd><p>Calls <a href="https://www.ecma-international.org/ecma-402/1.0/#sec-11.3.2"><code>Intl.NumberFormat.prototype.format</code></a>.</p><p>OCaml:</p><pre><code class="ml">let formatter = Intl.NumberFormat.make
  ~locales:[|&quot;es-ES&quot;|]
  ~style:(Currency { isoCode = &quot;EUR&quot;; display = Some Symbol })
  ~digits:(Significant { maximum = Some 2; minimum = Some 2 })
  () in
let moneyStr = Intl.NumberFormat.format formatter 56456.897 in
Js.Console.log moneyStr</code></pre><p>Reason:</p><pre><code class="ml">let formatter = Intl.NumberFormat.make(
  ~locales=[|&quot;es-ES&quot;|],
  ~style=Currency({isoCode: &quot;EUR&quot;, display: Some(Symbol)}),
  ~digits=Significant({maximum: Some(2), minimum: Some(2)}),
  ());
let moneyStr = Intl.NumberFormat.format(formatter, 56456.897);
Js.Console.log(moneyStr);</code></pre></dd></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> { ... }<span class="keyword">;</span></code></span></summary><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> { ... }<span class="keyword">;</span></code></span></summary></details></div></div></div><dl><dt class="spec type" id="type-rawPart"><a href="#type-rawPart" class="anchor"></a><code><span class="keyword">type</span> rawPart</code>;</dt></dl><dl><dt class="spec external" id="val-rawPart"><a href="#val-rawPart" class="anchor"></a><code><span class="keyword">let</span> rawPart: type_:string <span>=&gt;</span> value:string <span>=&gt;</span> <a href="#type-rawPart">rawPart</a>;</code></dt><dt class="spec external" id="val-type_"><a href="#val-type_" class="anchor"></a><code><span class="keyword">let</span> type_: <a href="#type-rawPart">rawPart</a> <span>=&gt;</span> string;</code></dt><dt class="spec external" id="val-type_Get"><a href="#val-type_Get" class="anchor"></a><code><span class="keyword">let</span> type_Get: <a href="#type-rawPart">rawPart</a> <span>=&gt;</span> string;</code></dt><dt class="spec external" id="val-value"><a href="#val-value" class="anchor"></a><code><span class="keyword">let</span> value: <a href="#type-rawPart">rawPart</a> <span>=&gt;</span> string;</code></dt><dt class="spec external" id="val-valueGet"><a href="#val-valueGet" class="anchor"></a><code><span class="keyword">let</span> valueGet: <a href="#type-rawPart">rawPart</a> <span>=&gt;</span> string;</code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-partType"><a href="#type-partType" class="anchor"></a><code><span class="keyword">type</span> partType</code><code> = </code><table class="variant"><tr id="type-partType.Currency" class="anchored"><td class="def constructor"><a href="#type-partType.Currency" class="anchor"></a><code>| </code><code><span class="constructor">Currency</span></code></td></tr><tr id="type-partType.Decimal" class="anchored"><td class="def constructor"><a href="#type-partType.Decimal" class="anchor"></a><code>| </code><code><span class="constructor">Decimal</span></code></td></tr><tr id="type-partType.Fraction" class="anchored"><td class="def constructor"><a href="#type-partType.Fraction" class="anchor"></a><code>| </code><code><span class="constructor">Fraction</span></code></td></tr><tr id="type-partType.Group" class="anchored"><td class="def constructor"><a href="#type-partType.Group" class="anchor"></a><code>| </code><code><span class="constructor">Group</span></code></td></tr><tr id="type-partType.Infinity" class="anchored"><td class="def constructor"><a href="#type-partType.Infinity" class="anchor"></a><code>| </code><code><span class="constructor">Infinity</span></code></td></tr><tr id="type-partType.Integer" class="anchored"><td class="def constructor"><a href="#type-partType.Integer" class="anchor"></a><code>| </code><code><span class="constructor">Integer</span></code></td></tr><tr id="type-partType.Literal" class="anchored"><td class="def constructor"><a href="#type-partType.Literal" class="anchor"></a><code>| </code><code><span class="constructor">Literal</span></code></td></tr><tr id="type-partType.MinusSign" class="anchored"><td class="def constructor"><a href="#type-partType.MinusSign" class="anchor"></a><code>| </code><code><span class="constructor">MinusSign</span></code></td></tr><tr id="type-partType.NaN" class="anchored"><td class="def constructor"><a href="#type-partType.NaN" class="anchor"></a><code>| </code><code><span class="constructor">NaN</span></code></td></tr><tr id="type-partType.PlusSign" class="anchored"><td class="def constructor"><a href="#type-partType.PlusSign" class="anchor"></a><code>| </code><code><span class="constructor">PlusSign</span></code></td></tr><tr id="type-partType.PercentSign" class="anchored"><td class="def constructor"><a href="#type-partType.PercentSign" class="anchor"></a><code>| </code><code><span class="constructor">PercentSign</span></code></td></tr></table>;</dt><dt class="spec type" id="type-part"><a href="#type-part" class="anchor"></a><code><span class="keyword">type</span> part</code><code> = </code><code>{</code><table class="record"><tr id="type-part.type_" class="anchored"><td class="def field"><a href="#type-part.type_" class="anchor"></a><code>type_: <a href="#type-partType">partType</a>,</code></td></tr><tr id="type-part.value" class="anchored"><td class="def field"><a href="#type-part.value" class="anchor"></a><code>value: string,</code></td></tr></table><code>}</code>;</dt></dl><dl><dt class="spec exception" id="exception-InvalidPart"><a href="#exception-InvalidPart" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">InvalidPart</span>(<a href="#type-rawPart">rawPart</a>)</code>;</dt></dl><dl><dt class="spec value" id="val-formatToParts"><a href="#val-formatToParts" class="anchor"></a><code><span class="keyword">let</span> formatToParts: <a href="#type-t">t</a> <span>=&gt;</span> float <span>=&gt;</span> array(<a href="#type-part">part</a>);</code></dt><dd><p>Calls <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat/formatToParts"><code>Intl.NumberFormat.prototype.formatToParts</code></a>.</p><dl><dt>raises [InvalidPart]</dt><dd><p>if a part type doesn't match the possible types outlined in MDN.</p><p>OCaml:</p><pre><code class="ml">let formatter = Intl.NumberFormat.make
  ~locales:[|&quot;es-ES&quot;|]
  ~style:(Currency { isoCode = &quot;EUR&quot;; display = Some Symbol })
  ~digits:(Significant { maximum = Some 2; minimum = Some 2 })
  () in
let parts = Intl.NumberFormat.formatToParts formatter 2000000.0 in
match parts with
| [||] -&gt; ()
| { value = value; _ } :: _ -&gt; Js.Console.log value</code></pre><p>Reason:</p><pre><code class="ml">let formatter = Intl.NumberFormat.make(
  ~locales=[|&quot;es-ES&quot;|],
  ~style=Currency({isoCode: &quot;EUR&quot;, display: Some(Symbol)}),
  ~digits=Significant({maximum: Some(2), minimum: Some(2)}),
  ());
let parts = Intl.NumberFormat.formatToParts(formatter, 2000000.0);
switch (parts) {
| [||] =&gt; ()
| [|{value: value}, ..._|] =&gt; Js.Console.log(value)
}</code></pre></dd></dl></dd></dl><dl><dt class="spec value" id="val-supportedLocalesOf"><a href="#val-supportedLocalesOf" class="anchor"></a><code><span class="keyword">let</span> supportedLocalesOf: array(string) <span>=&gt;</span> ?&#8288;localeMatcher:<a href="#type-localeMatcher">localeMatcher</a> <span>=&gt;</span> unit <span>=&gt;</span> array(string);</code></dt><dd><p>Calls <a href="https://www.ecma-international.org/ecma-402/1.0/#sec-11.2.2"><code>Intl.NumberFormat.supportedLocalesOf</code></a>.</p><p>OCaml:</p><pre><code class="ml">let supported = Intl.NumberFormat.supportedLocalesOf [|&quot;en-GB&quot;; &quot;ridiculous&quot;|] () in
Js.Console.log (string_of_int (Belt.Array.length supported))</code></pre><p>Reason:</p><pre><code class="ml">let supported = Intl.NumberFormat.supportedLocalesOf([|&quot;en-GB&quot;, &quot;ridiculous&quot;|], ());
Js.Console.log(string_of_int(Belt.Array.length(supported)));</code></pre></dd></dl></div></body></html>