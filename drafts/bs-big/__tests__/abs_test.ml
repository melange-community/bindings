open Jest


let () =
  describe "Expect" (fun () ->
  let open Expect in
  let abs_test =
    let count = ref 0 in
    fun exp v ->
    count := !count + 1;
    let v' = v |> Big.abs |> Big.toString in
    test ("abs_test" ^ string_of_int !count) (fun () -> expect v' |> toBe exp ) in

  Big.setDP 20;
  Big.setRM 1;

  abs_test "1" (Big.fromInt 1);
  abs_test "1" (Big.fromInt (-1));
  abs_test "0.5" (Big.fromFloat 0.5);
  abs_test "0.5" (Big.fromFloat (-0.5));
  abs_test "0.1" (Big.fromFloat (0.1));
  abs_test "0.1" (Big.fromFloat (-0.1));
  abs_test "1.1" (Big.fromFloat (1.1));
  abs_test "1.1" (Big.fromFloat (-1.1));
  abs_test "1.5" (Big.fromFloat (1.5));
  abs_test "1.5" (Big.fromFloat (-1.5));

  abs_test "0.00001" (Big.fromString "-1e-5");
  abs_test "9000000000" (Big.fromString "-9e9");
  abs_test "123456.7891011" (Big.fromFloat (-123456.7891011));
  abs_test "999.999" (Big.fromString "-999.999");
  abs_test "99" (Big.fromInt 99);
  abs_test "1" (Big.fromString "-1");
  abs_test "0.001" (Big.fromString "0.001");
  abs_test "0.001" (Big.fromString "-0.001");
  abs_test "0" (Big.fromInt 0);
  abs_test "0" (Big.fromString "-0");

  let bool_test =
    let count = ref 0 in
    fun exp v ->
      count := !count + 1;
      test ("abs_test_minus_zero" ^ string_of_int !count)
        (fun () -> expect v |> toBe exp) in

  let is_minus_zero x = Big.toString x = "0" && Big.s x = -1 in

  bool_test true (Big.fromString "-0" |> is_minus_zero);
  bool_test false (-0 |> Big.fromInt |> is_minus_zero);
  bool_test false (Big.fromString "-0" |> Big.abs |> is_minus_zero);
  bool_test true (Big.fromString "-0" |> Big.abs |> is_minus_zero |> not);

  (*Test OCaml min/max floats*)
  abs_test (min_float |> Js.Float.toString) (min_float |> Big.fromFloat);
  abs_test (min_float |> Js.Float.toString) (-.min_float |> Big.fromFloat);
  abs_test (max_float |> Js.Float.toString) (max_float |> Big.fromFloat);
  abs_test (max_float |> Js.Float.toString) (-.max_float |> Big.fromFloat);

  (*Test javascript min/max floats*)
  let js_min_float = 5e-324 in
  (*this is actually the same as OCaml's but keeping for now*)
  let js_max_float = 1.7976931348623157e+308 in

  abs_test (js_min_float |> Js.Float.toString) (js_min_float |> Big.fromFloat);
  abs_test (js_min_float |> Js.Float.toString) (-.js_min_float |> Big.fromFloat);
  abs_test (js_max_float |> Js.Float.toString) (js_max_float |> Big.fromFloat);
  abs_test (js_max_float |> Js.Float.toString) (-.js_max_float |> Big.fromFloat);

  (*Makes it much easier to copy tests*)
  let tup_test_int (exp,v) = abs_test (string_of_int exp) (Big.fromInt v) in
  let two_30 = 1073741824 in

  tup_test_int (two_30, two_30);
  tup_test_int (two_30, -two_30);

  tup_test_int (two_30 + 1, two_30 + 1);
  tup_test_int (two_30 + 1, -two_30 - 1);

  tup_test_int (two_30 - 1, two_30 - 1);
  tup_test_int (two_30 - 1, -two_30 + 1);

  (*These will fail because of integer representation differences*)
  (*tup_test_int (two_31 + 1, two_31 + 1);
  tup_test_int (two_31 + 1, -two_31 - 1);
  tup_test_int (two_31 - 1, two_31 - 1);
  tup_test_int (two_31 - 1, -two_31 + 1);*)

  let tup_test_string (exp, v) = abs_test exp (Big.fromString v) in

  tup_test_string ("0", "0");
  tup_test_string ("1", "-1");
  tup_test_string ("11.121", "11.121");
  tup_test_string ("0.023842", "-0.023842");
  tup_test_string ("1.19", "-1.19");
  tup_test_string ("9.622e-11", "-0.00000000009622");
  tup_test_string ("5.09e-10", "-0.000000000509");
  tup_test_string ("3838.2", "3838.2");
  tup_test_string ("127", "127.0");
  tup_test_string ("4.23073", "4.23073");
  tup_test_string ("2.5469", "-2.5469");
  tup_test_string ("29949", "-29949");
  tup_test_string ("277.1", "-277.10");
  tup_test_string ("4.97898e-15", "-0.00000000000000497898");
  tup_test_string ("53.456", "53.456");
  tup_test_string ("100564", "-100564");
  tup_test_string ("12431.9", "-12431.9");
  tup_test_string ("97633.7", "-97633.7");
  tup_test_string ("220", "220");
  tup_test_string ("188.67", "-188.67");
  tup_test_string ("35", "-35");
  tup_test_string ("2.6", "-2.6");
  tup_test_string ("2.2e-19", "-0.000000000000000000220");
  tup_test_string ("1.469", "-1.469");
  tup_test_string ("150.7", "-150.7");
  tup_test_string ("74", "-74");
  tup_test_string ("3.52e-9", "-0.00000000352");
  tup_test_string ("2221.7", "-2221.7");
  tup_test_string ("0.000004211", "-0.000004211");
  tup_test_string ("1", "-1");
  tup_test_string ("5.886", "-5.886");
  tup_test_string ("16", "16");
  tup_test_string ("4.4493e-9", "0.0000000044493");
  tup_test_string ("47.6", "47.6");
  tup_test_string ("1.6", "-1.60");
  tup_test_string ("1", "-1");
  tup_test_string ("1.5", "-1.5");
  tup_test_string ("5", "-5");
  tup_test_string ("1", "-1");
  tup_test_string ("8027", "8027");
  tup_test_string ("6.36e-16", "-0.000000000000000636");
  tup_test_string ("3.87766", "3.87766");
  tup_test_string ("7.4", "-7.4");
  tup_test_string ("4.449", "-4.449");
  tup_test_string ("5.2218e-19", "-0.000000000000000000522180");
  tup_test_string ("1.3769e-11", "-0.000000000013769");
  tup_test_string ("7.898e-13", "-0.0000000000007898");
  tup_test_string ("522.9", "-522.9");
  tup_test_string ("16.1", "-16.1");
  tup_test_string ("2.15", "2.15");
  tup_test_string ("4.3", "4.3");
  tup_test_string ("3", "-3");
  tup_test_string ("2.8", "-2.8");
  tup_test_string ("1", "-1");
  tup_test_string ("0.0000128696", "-0.0000128696");
  tup_test_string ("13.33", "-13.33");
  tup_test_string ("0.00000132177", "-0.00000132177");
  tup_test_string ("1.41516", "-1.41516");
  tup_test_string ("180.4", "-180.4");
  tup_test_string ("115079", "-115079");
  tup_test_string ("959", "959");
  tup_test_string ("714.4", "714.4");
  tup_test_string ("1.4544", "1.4544");
  tup_test_string ("53.691", "53.691");
  tup_test_string ("2.03832e-12", "-0.00000000000203832");
  tup_test_string ("1", "-1");
  tup_test_string ("10.8", "10.8");
  tup_test_string ("6189.2", "-6189.2");
  tup_test_string ("6.30866", "6.30866");
  tup_test_string ("62306", "62306");
  tup_test_string ("4", "-4.0");
  tup_test_string ("997.1", "-997.1");
  tup_test_string ("27.4", "-27.40");
  tup_test_string ("9242", "9242");
  tup_test_string ("31.1", "-31.1");
  tup_test_string ("23.4", "23.4");
  tup_test_string ("451818", "-451818");
  tup_test_string ("7", "-7");
  tup_test_string ("1.9", "-1.9");
  tup_test_string ("2", "-2");
  tup_test_string ("112.983", "-112.983");
  tup_test_string ("9.36e-8", "-0.0000000936");
  tup_test_string ("12.8515", "12.8515");
  tup_test_string ("73.1", "-73.1");
  tup_test_string ("18.15", "18.150");
  tup_test_string ("11997.8", "11997.8");
  tup_test_string ("23.1", "-23.1");
  tup_test_string ("82.022", "-82.022");
  tup_test_string ("3.916e-20", "-0.00000000000000000003916");
  tup_test_string ("3.3", "-3.3");
  tup_test_string ("892.1", "-892.1");
  tup_test_string ("24.4", "24.4");
  tup_test_string ("72", "72.0");
  tup_test_string ("0.0013346", "0.0013346");
  tup_test_string ("10.4", "-10.4");
  tup_test_string ("367.5", "367.5");
  tup_test_string ("7", "-7");
  tup_test_string ("127.195", "127.195");
  tup_test_string ("7.89e-13", "-0.000000000000789");
  tup_test_string ("63", "-63");
  tup_test_string ("85821.2", "-85821.2");
  tup_test_string ("95.6", "95.6");
  tup_test_string ("8.9e-14", "-0.000000000000089");
  tup_test_string ("112.1", "-112.1");
  tup_test_string ("3.68", "-3.68");
  tup_test_string ("9", "-9");
  tup_test_string ("0.0000975", "-0.0000975");
  tup_test_string ("393.6", "-393.6");
  tup_test_string ("7.4", "-7.4");
  tup_test_string ("69.62", "-69.62");
  tup_test_string ("5201.3", "5201.3");
  tup_test_string ("163", "163");
  tup_test_string ("4.30732", "4.30732");
  tup_test_string ("224.49", "-224.49");
  tup_test_string ("319.8", "-319.8");
  tup_test_string ("88.1", "-88.1");
  tup_test_string ("2.7762e-8", "0.000000027762");
  tup_test_string ("2.043e-7", "-0.0000002043");
  tup_test_string ("75459.3", "-75459.3");
  tup_test_string ("0.178", "0.178");
  tup_test_string ("0.00001633", "0.00001633");
  tup_test_string ("955", "955");
  tup_test_string ("373898", "-373898");
  tup_test_string ("9780.1", "9780.1");
  tup_test_string ("503.47", "503.47");
  tup_test_string ("3.44562", "-3.44562");
  tup_test_string ("1.6", "-1.6");
  tup_test_string ("1.22442", "-1.22442");
  tup_test_string ("1.4", "1.4");
  tup_test_string ("1219.1", "-1219.1");
  tup_test_string ("2.7", "-2.7");
  tup_test_string ("1057", "-1057");
  tup_test_string ("1938", "1938");
  tup_test_string ("1.1983", "1.1983");
  tup_test_string ("0.0012", "-0.0012");
  tup_test_string ("95.713", "-95.713");
  tup_test_string ("2", "-2");
  tup_test_string ("17.24", "-17.24");
  tup_test_string ("10.3", "-10.3");
  tup_test_string ("1", "-1");
  tup_test_string ("65.8", "-65.8");
  tup_test_string ("2.9", "2.9");
  tup_test_string ("54149", "54149");
  tup_test_string ("8", "-8");
  tup_test_string ("1", "1.0");
  tup_test_string ("4", "-4");
  tup_test_string ("6.3", "-6.3");
  tup_test_string ("5.25e-9", "0.00000000525");
  tup_test_string ("52.3", "-52.3");
  tup_test_string ("75290", "-75290");
  tup_test_string ("5.9", "-5.9");
  tup_test_string ("13.7", "13.7");
  tup_test_string ("2.3982e-9", "0.0000000023982");
  tup_test_string ("91.5", "-91.50");
  tup_test_string ("2072.39", "2072.39");
  tup_test_string ("385.6", "385.6");
  tup_test_string ("4.77", "4.77");
  tup_test_string ("18.72", "18.720");
  tup_test_string ("2817", "-2817");
  tup_test_string ("44535", "-44535");
  tup_test_string ("655", "655");
  tup_test_string ("2e-15", "-0.0000000000000020");
  tup_test_string ("0.625", "0.6250");
  tup_test_string ("2", "-2");
  tup_test_string ("5.315", "5.315");
  tup_test_string ("70.9", "70.90");
  tup_test_string ("6.4", "6.4");
  tup_test_string ("1824", "1824");
  tup_test_string ("52.595", "52.595");
  tup_test_string ("3662", "3662.0");
  tup_test_string ("3.1", "3.1");
  tup_test_string ("1.05032e-7", "0.000000105032");
  tup_test_string ("997.063", "-997.063");
  tup_test_string ("41746", "-41746");
  tup_test_string ("24.0402", "24.0402");
  tup_test_string ("0.009135", "0.009135");
  tup_test_string ("2.34e-9", "-0.00000000234");
  tup_test_string ("13.1", "13.1");
  tup_test_string ("228.8", "228.8");
  tup_test_string ("565.85", "565.85");
  tup_test_string ("4e-20", "0.000000000000000000040");
  tup_test_string ("1.73", "1.73");
  tup_test_string ("38.9", "38.9");
  tup_test_string ("1.02e-14", "-0.0000000000000102");
  tup_test_string ("302.8", "-302.8");
  tup_test_string ("7", "-7");
  tup_test_string ("1", "-1");
  tup_test_string ("0.00247", "0.00247");
  tup_test_string ("2", "-2");
  tup_test_string ("3.26", "-3.26");
  tup_test_string ("8.8", "8.8");
  tup_test_string ("90.6", "90.6");
  tup_test_string ("8.3053e-17", "-0.000000000000000083053");
  tup_test_string ("2.5", "-2.5");
  tup_test_string ("376.2", "-376.2");
  tup_test_string ("1.29", "1.29");
  tup_test_string ("1.379", "-1.379");
  tup_test_string ("40921.5", "-40921.5");
  tup_test_string ("1", "-1");
  tup_test_string ("12.5", "12.5");
  tup_test_string ("10.1", "10.1");
  tup_test_string ("1", "-1");
  tup_test_string ("226636", "226636");
  tup_test_string ("1", "-1");
  tup_test_string ("1.7", "-1.7");
  tup_test_string ("31.31", "31.31");
  tup_test_string ("79.9", "-79.9");
  tup_test_string ("4.027e-13", "0.0000000000004027");
  tup_test_string ("43.838", "43.838");
  tup_test_string ("6.47", "-6.47");
  tup_test_string ("5.292e-19", "0.0000000000000000005292");
  tup_test_string ("4.6", "-4.6");
  tup_test_string ("15918", "-15918.0");
  tup_test_string ("239.45", "239.45");
  tup_test_string ("1.02", "-1.02");
  tup_test_string ("14101", "-14101");
  tup_test_string ("7", "-7");
  tup_test_string ("367.34", "367.34");
  tup_test_string ("5", "-5");
  tup_test_string ("19.9", "-19.9");
  tup_test_string ("269.45", "-269.45");
  tup_test_string ("10.34", "-10.34");
  tup_test_string ("3.32882e-12", "-0.00000000000332882");
  tup_test_string ("5.9", "5.9");
  tup_test_string ("9", "-9.0");
  tup_test_string ("1.3597", "-1.3597");
  tup_test_string ("8", "8.0");
  tup_test_string ("1", "1.0");
  tup_test_string ("312.5", "312.5");
  tup_test_string ("1.554", "-1.554");
  tup_test_string ("210.985", "-210.985");
  tup_test_string ("1", "-1");
  tup_test_string ("1.24", "-1.24");
  tup_test_string ("513865", "-513865");
  tup_test_string ("6748", "-6748");
  tup_test_string ("591.51", "-591.51");
  tup_test_string ("2.2", "-2.2");
  tup_test_string ("19.5495", "19.5495");
  tup_test_string ("3.3", "3.3");
  tup_test_string ("30", "-30");
  tup_test_string ("94", "-94");
  tup_test_string ("217.55", "217.55");
  tup_test_string ("2", "-2");
  tup_test_string ("99", "99");
  tup_test_string ("4.067", "-4.067");
  tup_test_string ("702.57", "702.57");
  tup_test_string ("3.7", "-3.70");
  tup_test_string ("4", "4.0");
  tup_test_string ("192944", "192944");
  tup_test_string ("0.000022", "0.000022");
  tup_test_string ("47.6", "47.60");
  tup_test_string ("0.391", "0.3910");
  tup_test_string ("35", "-35");
  tup_test_string ("100", "-100");
  tup_test_string ("3.3", "-3.3");
  tup_test_string ("32.432", "32.432");
  tup_test_string ("1.07849e-18", "0.00000000000000000107849");
  tup_test_string ("2", "-2.0");
  tup_test_string ("23.27", "23.27");
  tup_test_string ("4.054e-15", "-0.000000000000004054");
  tup_test_string ("7.6", "-7.6");
  tup_test_string ("1305", "1305");
  tup_test_string ("1.501", "-1.501");
  tup_test_string ("3.4", "3.4");
  tup_test_string ("22.5", "-22.5");
  tup_test_string ("1.0916", "1.0916");
  tup_test_string ("2", "-2");
  tup_test_string ("58.271", "58.271");
  tup_test_string ("1.73e-12", "0.00000000000173");
  tup_test_string ("1.3458e-15", "0.0000000000000013458");
  tup_test_string ("309.87", "-309.87");
  tup_test_string ("5.318", "-5.318");
  tup_test_string ("1.5302e-8", "0.000000015302");
  tup_test_string ("596765", "596765");
  tup_test_string ("54.42", "-54.42");
  tup_test_string ("6.549e-20", "0.00000000000000000006549");
  tup_test_string ("29", "29");
  tup_test_string ("46.025", "46.025");
  tup_test_string ("2556.78", "-2556.78");
  tup_test_string ("0.00287721", "0.00287721");
  tup_test_string ("1.63", "-1.63");
  tup_test_string ("0.00041", "0.00041");
  tup_test_string ("698", "698");
  tup_test_string ("134.4", "134.4");
  tup_test_string ("2.1", "2.1");
  tup_test_string ("2.07", "-2.07");
  tup_test_string ("122.869", "122.869");
  tup_test_string ("0.00017", "-0.00017");
  tup_test_string ("18.6", "18.6");
  tup_test_string ("7", "-7");
  tup_test_string ("0.0180557", "0.0180557");
  tup_test_string ("5", "-5");
  tup_test_string ("6.2", "-6.2");
  tup_test_string ("8", "-8");
  tup_test_string ("450.96", "-450.96");
  tup_test_string ("20.2", "-20.2");
  tup_test_string ("176.52", "176.52");
  tup_test_string ("0.00017", "-0.000170");
  tup_test_string ("5", "-5");
  tup_test_string ("1", "-1");
  tup_test_string ("1.37856e-14", "0.0000000000000137856");
  tup_test_string ("76.3048", "76.3048");
  tup_test_string ("1803.7", "-1803.7");
  tup_test_string ("74", "74");
  tup_test_string ("1.7e-12", "0.0000000000017");
  tup_test_string ("48.7", "-48.7");
  tup_test_string ("4.48", "-4.48");
  tup_test_string ("1.4", "-1.4");
  tup_test_string ("7.69", "-7.69");
  tup_test_string ("23.5987", "23.5987");
  tup_test_string ("3074", "3074.0");
  tup_test_string ("8.06e-15", "-0.00000000000000806");
  tup_test_string ("21.3757", "-21.3757");
  tup_test_string ("35", "35");
  tup_test_string ("11.056", "11.0560");
  tup_test_string ("3.36e-14", "-0.0000000000000336");
  tup_test_string ("49139.4", "-49139.4");
  tup_test_string ("32.654", "-32.654");
  tup_test_string ("34035.4", "34035.4");
  tup_test_string ("15.22", "15.22");
  tup_test_string ("62", "62.0");
  tup_test_string ("8.89156", "-8.89156");
  tup_test_string ("14", "14");
  tup_test_string ("0.006", "-0.0060");
  tup_test_string ("1.5", "1.5");
  tup_test_string ("7", "-7");
  tup_test_string ("1.6e-11", "0.000000000016");
  tup_test_string ("26.6427", "26.6427");
  tup_test_string ("1.5e-18", "-0.0000000000000000015");
  tup_test_string ("1.52838e-15", "0.00000000000000152838");
  tup_test_string ("119.1", "119.1");
  tup_test_string ("0.004283", "0.004283");
  tup_test_string ("818", "-818");
  tup_test_string ("194", "194");
  tup_test_string ("104.788", "-104.788");
  tup_test_string ("3.74e-11", "0.0000000000374");
  tup_test_string ("6.162", "-6.162");
  tup_test_string ("5.19214e-18", "-0.00000000000000000519214");
  tup_test_string ("1.4", "-1.4");
  tup_test_string ("1.27", "-1.27");
  tup_test_string ("7.83822e-12", "-0.00000000000783822");
  tup_test_string ("1", "-1");
  tup_test_string ("4.4", "4.4");
  tup_test_string ("7.37382e-12", "0.00000000000737382");
  tup_test_string ("13.618", "13.618");
  tup_test_string ("1.03", "-1.03");
  tup_test_string ("3.7457e-13", "0.00000000000037457");
  tup_test_string ("5.2", "-5.2");
  tup_test_string ("3.5", "3.5");
  tup_test_string ("364", "-364");
  tup_test_string ("7.336", "7.336");
  tup_test_string ("1.1447e-16", "-0.00000000000000011447");
  tup_test_string ("510.63", "-510.63");
  tup_test_string ("5.8", "5.8");
  tup_test_string ("7.8", "7.8");
  tup_test_string ("2.96", "-2.96");
  tup_test_string ("15.64", "-15.64");
  tup_test_string ("187863", "-187863");
  tup_test_string ("2.73", "-2.73");
  tup_test_string ("2.671", "-2.671");
  tup_test_string ("18.179", "-18.179");
  tup_test_string ("855885", "855885");
  tup_test_string ("4.16", "4.16");
  tup_test_string ("5.722e-18", "0.000000000000000005722");
  tup_test_string ("67.62", "67.62");
  tup_test_string ("813.31", "813.31");
  tup_test_string ("40.2", "40.20");
  tup_test_string ("0.00002515", "0.00002515");
  tup_test_string ("0.0196", "0.01960");
  tup_test_string ("13.165", "13.165");
  tup_test_string ("6.743", "-6.743");
  tup_test_string ("1", "-1");
  tup_test_string ("200.56", "-200.56");
  tup_test_string ("1.932", "1.932");
  tup_test_string ("92.9", "92.90");
  tup_test_string ("16.74", "16.74");
  tup_test_string ("4.5554e-7", "-0.00000045554");
  tup_test_string ("2.1296e-15", "-0.0000000000000021296");
  tup_test_string ("2.088", "2.088");
  tup_test_string ("2577", "2577");
  tup_test_string ("45.4", "-45.4");
  tup_test_string ("41.3", "-41.3");
  tup_test_string ("3.63", "-3.63");
  tup_test_string ("1.09", "-1.09");
  tup_test_string ("1", "-1");
  tup_test_string ("3.7", "-3.7");
  tup_test_string ("204.54", "204.54");
  tup_test_string ("235.6", "235.6");
  tup_test_string ("384", "-384");
  tup_test_string ("0.0207", "0.02070");
  tup_test_string ("680", "680");
  tup_test_string ("1.09", "1.09");
  tup_test_string ("109.2", "109.2");
  tup_test_string ("0.00010117", "0.00010117");
  tup_test_string ("13.81", "13.81");
  tup_test_string ("192.3", "192.3");
  tup_test_string ("1", "-1");
  tup_test_string ("1.2", "1.2");
  tup_test_string ("4.1", "-4.1");
  tup_test_string ("2.5", "2.5");
  tup_test_string ("8.4076", "-8.4076");
  tup_test_string ("0.0517", "0.0517");
  tup_test_string ("6.3923", "-6.3923");
  tup_test_string ("506.179", "-506.179");
  tup_test_string ("375886", "375886");
  tup_test_string ("618858", "-618858");
  tup_test_string ("8.5e-11", "0.000000000085");
  tup_test_string ("6", "-6.0");
  tup_test_string ("2.4", "2.40");
  tup_test_string ("0.0000013", "-0.0000013");
  tup_test_string ("1.064", "-1.064");
  tup_test_string ("1", "-1");
  tup_test_string ("4", "-4");
  tup_test_string ("4.5", "-4.5");
  tup_test_string ("93.6206", "93.6206");
  tup_test_string ("3.07e-18", "0.00000000000000000307");

  tup_test_string ("52.452468128", "-5.2452468128e+1");
  tup_test_string ("14152590525718936.5008396", "1.41525905257189365008396e+16");
  tup_test_string ("274306808392.8", "2.743068083928e+11");
  tup_test_string ("1.52993064722314247378724599e+26", "-1.52993064722314247378724599e+26");
  tup_test_string ("37205576746", "3.7205576746e+10");
  tup_test_string ("868099644460934347.2665", "8.680996444609343472665e+17");
  tup_test_string ("1254.549", "1.254549e+3");
  tup_test_string ("6.23417196172381875892300762819e-18", "6.23417196172381875892300762819e-18");
  tup_test_string ("13117994082191928443.1", "1.31179940821919284431e+19");
  tup_test_string ("97697726.168", "9.7697726168e+7");
  tup_test_string ("2.663e-10", "-2.663e-10");
  tup_test_string ("1052", "1.052e+3");
  tup_test_string ("3.815873266712e-20", "-3.815873266712e-20");
  tup_test_string ("18", "1.8e+1");
  tup_test_string ("1.033525906631680944018544811261e-13", "1.033525906631680944018544811261e-13");
  tup_test_string ("3.805493087068952925e-11", "-3.805493087068952925e-11");
  tup_test_string ("0.0173948", "1.73948e-2");
  tup_test_string ("5.784e-15", "5.784e-15");
  tup_test_string ("4.448338479762497e-8", "4.448338479762497e-8");
  tup_test_string ("390080230.52", "3.9008023052e+8");
  tup_test_string ("3", "3e+0");
  tup_test_string ("8.61435e-9", "8.61435e-9");
  tup_test_string ("43.7", "-4.37e+1");
  tup_test_string ("8.4034159379836e-18", "-8.4034159379836e-18");
  tup_test_string ("20028573.55721079885824481", "2.002857355721079885824481e+7");
  tup_test_string ("7000871.862", "-7.000871862e+6");
  )
